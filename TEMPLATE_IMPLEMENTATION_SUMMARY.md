# –ó–≤—ñ—Ç –ø—Ä–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Å–∏—Å—Ç–µ–º–∏ —à–∞–±–ª–æ–Ω—ñ–≤ –ø—Ä–æ–º—Ç—ñ–≤

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

### 1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ñ–∞–π–ª—ñ–≤
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `/workspace/gpt-prompt/` –¥–ª—è GPT —à–∞–±–ª–æ–Ω—ñ–≤
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `/workspace/claude-prompt/` –¥–ª—è Claude —à–∞–±–ª–æ–Ω—ñ–≤  
- ‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ —ñ—Å–Ω—É—é—á—ñ —à–∞–±–ª–æ–Ω–∏ —è–∫ `default_template.txt`
- ‚úÖ –î–æ–¥–∞–Ω–æ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ —à–∞–±–ª–æ–Ω—ñ–≤ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó

### 2. –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ –±–æ—Ç–∞
- ‚úÖ –î–æ–¥–∞–Ω–æ –Ω–æ–≤—ñ —Å—Ç–∞–Ω–∏ FSM –≤ `ProcessingStates`
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –º–æ–¥—É–ª—å `template_handlers.py` –∑ –ø–æ–≤–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é —à–∞–±–ª–æ–Ω—ñ–≤
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –Ω–æ–≤–∏–π —Ä–æ—É—Ç–µ—Ä `template_router` –≤ –≥–æ–ª–æ–≤–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ —ñ–º–ø–æ—Ä—Ç–∏ —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é —Ä–æ—É—Ç–µ—Ä—ñ–≤

### 3. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –≤–∏–±–æ—Ä—É —à–∞–±–ª–æ–Ω—ñ–≤
- ‚úÖ –ö–Ω–æ–ø–∫–æ–≤–µ –º–µ–Ω—é –¥–ª—è –≤–∏–±–æ—Ä—É —Ç–∏–ø—É AI (GPT/Claude/–í–ª–∞—Å–Ω–∏–π)
- ‚úÖ –î–∏–Ω–∞–º—ñ—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É —à–∞–±–ª–æ–Ω—ñ–≤ –∑ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏
- ‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—ñ–≤ –∑ —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–º–∏ –Ω–∞–∑–≤–∞–º–∏
- ‚úÖ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –Ω–∞–∑–∞–¥ –º—ñ–∂ –º–µ–Ω—é

### 4. –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ –¥–ª—è GPT —à–∞–±–ª–æ–Ω—ñ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è —Å–µ–∫—Ü—ñ—ó "INCLUDE IN STORY:"
- ‚úÖ –ó–∞–ø–∏—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –¥–ª—è –∑–º—ñ–Ω–∏ —ñ—Å—Ç–æ—Ä—ñ—ó
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó —á–µ—Ä–µ–∑ GPT API
- ‚úÖ –ó–∞–º—ñ–Ω–∞ —Ç–µ–∫—Å—Ç—É –≤ —à–∞–±–ª–æ–Ω—ñ –∑ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
- ‚úÖ –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ —Ç–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–º—ñ–Ω

### 5. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–∏–º workflow
- ‚úÖ –ü–ª–∞–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –≤ `custom_prompt` –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –æ–±—Ä–æ–±–∫–∏
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ—Å–Ω—É—é—á–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó outline
- ‚úÖ –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ —É—Å—ñ–º–∞ —ñ—Å–Ω—É—é—á–∏–º–∏ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏

### 6. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–º–∞–Ω–¥ —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ welcome –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —à–∞–±–ª–æ–Ω–∏
- ‚úÖ –†–æ–∑—à–∏—Ä–µ–Ω–æ `/help` –∫–æ–º–∞–Ω–¥—É –∑ –æ–ø–∏—Å–æ–º –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
- ‚úÖ –î–æ–¥–∞–Ω–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —à–∞–±–ª–æ–Ω–∏ –≤ `/status` –∫–æ–º–∞–Ω–¥—É
- ‚úÖ –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –ø—Ä–æ–º—Ç—ñ–≤

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –ù–æ–≤—ñ —Ñ–∞–π–ª–∏
- `src/bot/template_handlers.py` - –æ—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ —à–∞–±–ª–æ–Ω—ñ–≤
- `gpt-prompt/default_template.txt` - –±–∞–∑–æ–≤–∏–π GPT —à–∞–±–ª–æ–Ω
- `gpt-prompt/revenge_story_template.txt` - –ø—Ä–∏–∫–ª–∞–¥ –∑ –∑–∞–º—ñ–Ω–æ—é —ñ—Å—Ç–æ—Ä—ñ—ó
- `claude-prompt/default_template.txt` - –±–∞–∑–æ–≤–∏–π Claude —à–∞–±–ª–æ–Ω
- `claude-prompt/story_58k_template.txt` - —à–∞–±–ª–æ–Ω –¥–ª—è 58K —Å–∏–º–≤–æ–ª—ñ–≤
- `claude-prompt/story_30k_template.txt` - —à–∞–±–ª–æ–Ω –¥–ª—è 30K —Å–∏–º–≤–æ–ª—ñ–≤  
- `claude-prompt/emotional_story_template.txt` - –µ–º–æ—Ü—ñ–π–Ω–∏–π —à–∞–±–ª–æ–Ω

### –û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏
- `src/bot/states.py` - –¥–æ–¥–∞–Ω–æ 6 –Ω–æ–≤–∏—Ö —Å—Ç–∞–Ω—ñ–≤ FSM
- `src/bot/file_handlers.py` - —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –≤–∏–±–æ—Ä–æ–º —à–∞–±–ª–æ–Ω—ñ–≤
- `src/bot/commands.py` - –æ–Ω–æ–≤–ª–µ–Ω–æ welcome, help —Ç–∞ status –∫–æ–º–∞–Ω–¥–∏
- `src/bot/__init__.py` - –¥–æ–¥–∞–Ω–æ –µ–∫—Å–ø–æ—Ä—Ç template_router
- `src/core/app.py` - —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞

### –ö–ª—é—á–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- `show_ai_choice()` - –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é –≤–∏–±–æ—Ä—É AI
- `show_template_choice()` - –ø–æ–∫–∞–∑ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —à–∞–±–ª–æ–Ω—ñ–≤
- `handle_template_selection()` - –æ–±—Ä–æ–±–∫–∞ –≤–∏–±–æ—Ä—É —à–∞–±–ª–æ–Ω—É
- `generate_new_story()` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó –¥–ª—è GPT
- `replace_story_in_template()` - –∑–∞–º—ñ–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—ó –≤ —à–∞–±–ª–æ–Ω—ñ
- `finalize_template_selection()` - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –≤–∏–±–æ—Ä—É

## üéØ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### GPT —à–∞–±–ª–æ–Ω–∏ –∑ –¥–∏–Ω–∞–º—ñ—á–Ω–æ—é –∑–∞–º—ñ–Ω–æ—é
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è —Å–µ–∫—Ü—ñ—ó "INCLUDE IN STORY:"
2. –ó–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—Ä–æ –±–∞–∂–∞–Ω–Ω—è –∑–º—ñ–Ω–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é
3. –ü—Ä–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—ñ - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó —á–µ—Ä–µ–∑ GPT
4. –ó–∞–º—ñ–Ω–∞ —Ç—ñ–ª—å–∫–∏ —Ç–µ–∫—Å—Ç—É –ø—ñ—Å–ª—è "INCLUDE IN STORY:", –ø—Ä–µ—Ñ—ñ–∫—Å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è
5. –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ —Ç–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó

### Claude —à–∞–±–ª–æ–Ω–∏ (—Å–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞)
1. –ü—Ä—è–º–∏–π –≤–∏–±—ñ—Ä —à–∞–±–ª–æ–Ω—É –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó –æ–±—Ä–æ–±–∫–∏
2. –û–¥—Ä–∞–∑—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–Ω—Ç—É

### –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ
- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–≤–æ–¥–∏—Ç–∏ –≤–ª–∞—Å–Ω—ñ –ø—Ä–æ–º—Ç–∏
- –Ü—Å–Ω—É—é—á–∏–π workflow –Ω–µ –ø–æ—Ä—É—à–µ–Ω–∏–π
- –í—Å—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø—Ä–∞—Ü—é—é—Ç—å —è–∫ —Ä–∞–Ω—ñ—à–µ

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ç–µ—Å—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏
- `test_story.txt` - –ø—Ä–∏–∫–ª–∞–¥ —Ç–µ–∫—Å—Ç—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏
- –î–æ–¥–∞—Ç–∫–æ–≤—ñ —à–∞–±–ª–æ–Ω–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É
- ‚úÖ –í—Å—ñ Python —Ñ–∞–π–ª–∏ —É—Å–ø—ñ—à–Ω–æ –∫–æ–º–ø—ñ–ª—é—é—Ç—å—Å—è
- ‚úÖ –ù–µ–º–∞—î —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏ —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

## üìã –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—é

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª —è–∫ –∑–∞–∑–≤–∏—á–∞–π
2. –û–±–µ—Ä—ñ—Ç—å —Ç–∏–ø –ø—Ä–æ–º—Ç—É: GPT —à–∞–±–ª–æ–Ω / Claude —à–∞–±–ª–æ–Ω / –í–ª–∞—Å–Ω–∏–π –ø—Ä–æ–º—Ç
3. –ü—Ä–∏ –≤–∏–±–æ—Ä—ñ —à–∞–±–ª–æ–Ω—É - –æ–±–µ—Ä—ñ—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ñ–∞–π–ª –∑—ñ —Å–ø–∏—Å–∫—É
4. –î–ª—è GPT —à–∞–±–ª–æ–Ω—ñ–≤ –∑ —ñ—Å—Ç–æ—Ä—ñ—î—é - –æ–±–µ—Ä—ñ—Ç—å —á–∏ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —ó—ó
5. –ü—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó

### –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
1. –î–æ–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ñ —à–∞–±–ª–æ–Ω–∏ —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó (.txt —Ñ–∞–π–ª–∏)
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑—Ä–æ–∑—É–º—ñ–ª—ñ –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—ñ–≤ (–ø—ñ–¥–∫—Ä–µ—Å–ª–µ–Ω–Ω—è ‚Üí –ø—Ä–æ–±—ñ–ª–∏)
3. –î–ª—è GPT: –¥–æ–¥–∞–≤–∞–π—Ç–µ "INCLUDE IN STORY:" —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –∑–∞–º—ñ–Ω–∞
4. –ó–º—ñ–Ω–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∑–≥—ñ–¥–Ω–æ —Ç–µ—Ö–Ω—ñ—á–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è:
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —à–∞–±–ª–æ–Ω—ñ–≤ –¥–ª—è GPT —Ç–∞ Claude
- ‚úÖ –î–∏–Ω–∞–º—ñ—á–Ω–∞ –∑–∞–º—ñ–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ–π –¥–ª—è GPT
- ‚úÖ –ö–Ω–æ–ø–∫–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ edge cases
- ‚úÖ –Ü–Ω—Ç—É—ó—Ç–∏–≤–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ë–æ—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ –Ω–æ–≤–æ—é —Å–∏—Å—Ç–µ–º–æ—é —à–∞–±–ª–æ–Ω—ñ–≤! üöÄ