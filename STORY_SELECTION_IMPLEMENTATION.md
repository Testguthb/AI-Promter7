# –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –°–∏—Å—Ç–µ–º–∏ –í–∏–±–æ—Ä—É –Ü—Å—Ç–æ—Ä—ñ–π

## –û–≥–ª—è–¥ –ó–º—ñ–Ω

–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–æ–±–∫–∏ —ñ—Å—Ç–æ—Ä—ñ–π –±—É–ª–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–±–æ—Ä—É —Ñ–∞–π–ª—ñ–≤ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ç–∞ –¥–æ–≤–≥–∏—Ö —ñ—Å—Ç–æ—Ä—ñ–π, –∑–±–µ—Ä—ñ–≥—à–∏ –ø—Ä–∏ —Ü—å–æ–º—É –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤.

## –ù–æ–≤—ñ –§—É–Ω–∫—Ü—ñ—ó

### 1. –ö–Ω–æ–ø–∫–∏ –í–∏–±–æ—Ä—É –¢–∏–ø—É –Ü—Å—Ç–æ—Ä—ñ—ó

–ü—Ä–∏ –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞ (`/start`) –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É —Ç–µ–ø–µ—Ä –ø—Ä–æ–ø–æ–Ω—É—é—Ç—å—Å—è —Ç—Ä–∏ –æ–ø—Ü—ñ—ó:
- **üìö –ö–æ—Ä–æ—Ç–∫—ñ —ñ—Å—Ç–æ—Ä—ñ—ó** - –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –≤–∏–±—ñ—Ä –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó –∫–æ—Ä–æ—Ç–∫–∏—Ö —ñ—Å—Ç–æ—Ä—ñ–π
- **üìñ –î–æ–≤–≥—ñ —ñ—Å—Ç–æ—Ä—ñ—ó** - –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –≤–∏–±—ñ—Ä –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó –¥–æ–≤–≥–∏—Ö —ñ—Å—Ç–æ—Ä—ñ–π  
- **üìÑ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π —Ñ–∞–π–ª** - —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–µ —Ä—É—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü–∞–ø–æ–∫

–°—Ç–≤–æ—Ä–µ–Ω–æ –¥–≤—ñ –ø–∞–ø–∫–∏ –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ —ñ—Å—Ç–æ—Ä—ñ–π:

**`short-story/`:**
- `–í–µ—Å–µ–ª–∏–π –ø—Ä–∏–≥–æ–¥–∞ –≤ –ª—ñ—Å—ñ.txt` - –ß–∞—Ä—ñ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –ø—Ä–æ —Ö–ª–æ–ø—á–∏–∫–∞ —Ç–∞ –º–∞–≥—ñ—á–Ω–∏–π –ª—ñ—Å
- `–¢–∞—î–º–Ω–∏—á–∞ —Å–∫—Ä–∏–Ω—å–∫–∞.txt` - –ö–∞–∑–∫–∞ –ø—Ä–æ –¥—ñ–≤—á–∏–Ω–∫—É —ñ —Å–∫—Ä–∏–Ω—å–∫—É –º—Ä—ñ–π
- `–ö–æ—Å–º—ñ—á–Ω–∏–π –∫—ñ—Ç –ú—É—Ä—á–∏–∫.txt` - –§–∞–Ω—Ç–∞—Å—Ç–∏—á–Ω–∞ –ø—Ä–∏–≥–æ–¥–∞ –∫–æ—Ç–∞-–∞—Å—Ç—Ä–æ–Ω–∞–≤—Ç–∞
- `–ö–æ—Ä–æ—Ç–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—è (—Ç–µ—Å—Ç).docx` - –¢–µ—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª —É —Ñ–æ—Ä–º–∞—Ç—ñ DOCX

**`long-story/`:**
- `–ö–æ—Ä–æ–ª—ñ–≤—Å—Ç–≤–æ –¥—Ä–∞–∫–æ–Ω—ñ–≤.txt` - –ï–ø—ñ—á–Ω–∞ —Ñ–µ–Ω—Ç–µ–∑—ñ –ø—Ä–æ —Å–∏–Ω–∞ –∫–æ–≤–∞–ª—è —Ç–∞ –ø—Ä–∏–Ω—Ü–µ—Å—É
- `–®–∫–æ–ª–∞ –º–∞–≥—ñ—ó —Ç–∞ —á—É–¥–µ—Å.txt` - –ü—Ä–∏–≥–æ–¥–∏ —é–Ω–æ—ó —á–∞—Ä—ñ–≤–Ω–∏—Ü—ñ –≤ –º–∞–≥—ñ—á–Ω—ñ–π –∞–∫–∞–¥–µ–º—ñ—ó
- `–ú–∞–Ω–¥—Ä—ñ–≤–Ω–∏–∫–∏ –≤ —á–∞—Å—ñ.txt` - –§–∞–Ω—Ç–∞—Å—Ç–∏—á–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –ø—Ä–æ –ø–æ–¥–æ—Ä–æ–∂—ñ –∫—Ä—ñ–∑—å —á–∞—Å
- `–î–æ–≤–≥–∞ —ñ—Å—Ç–æ—Ä—ñ—è (—Ç–µ—Å—Ç).docx` - –¢–µ—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª —É —Ñ–æ—Ä–º–∞—Ç—ñ DOCX

### 3. –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –í–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –í–∏–±–æ—Ä—É

–î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥ `get_random_story_file()` –¥–æ –∫–ª–∞—Å—É `FileProcessor`, —è–∫–∏–π:
- –°–∫–∞–Ω—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –ø–∞–ø–∫—É (`short-story/` –∞–±–æ `long-story/`)
- –§—ñ–ª—å—Ç—Ä—É—î —Ñ–∞–π–ª–∏ –∑–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ (`.txt`, `.docx`)
- –ü–æ–≤–µ—Ä—Ç–∞—î –≤–∏–ø–∞–¥–∫–æ–≤–æ –æ–±—Ä–∞–Ω–∏–π —Ñ–∞–π–ª
- –û–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏ —Ç–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—ñ–≤

## –¢–µ—Ö–Ω—ñ—á–Ω–∞ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### –ú–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –§–∞–π–ª–∏

1. **`src/bot/commands.py`**
   - –î–æ–¥–∞–Ω–æ –∫–Ω–æ–ø–∫–∏ –≤–∏–±–æ—Ä—É –¥–æ –∫–æ–º–∞–Ω–¥–∏ `/start`
   - –Ü–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ `InlineKeyboardMarkup` —Ç–∞ `InlineKeyboardButton`

2. **`src/bot/callbacks.py`**
   - –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫:
     - `select_short_story` - –≤–∏–±—ñ—Ä –∫–æ—Ä–æ—Ç–∫–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó
     - `select_long_story` - –≤–∏–±—ñ—Ä –¥–æ–≤–≥–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó
     - `manual_upload` - –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ —Ä—É—á–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

3. **`src/utils/file_processor.py`**
   - –î–æ–¥–∞–Ω–æ —ñ–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è `random`
   - –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –º–µ—Ç–æ–¥ `get_random_story_file()`

### –ù–æ–≤—ñ Callback Handlers

```python
@callbacks_router.callback_query(F.data == "select_short_story", StateFilter(ProcessingStates.waiting_for_file))
async def select_short_story(callback: CallbackQuery, state: FSMContext)

@callbacks_router.callback_query(F.data == "select_long_story", StateFilter(ProcessingStates.waiting_for_file))  
async def select_long_story(callback: CallbackQuery, state: FSMContext)

@callbacks_router.callback_query(F.data == "manual_upload", StateFilter(ProcessingStates.waiting_for_file))
async def manual_upload(callback: CallbackQuery, state: FSMContext)
```

## –†–æ–±–æ—á–∏–π –ü—Ä–æ—Ü–µ—Å

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –í–∏–±—ñ—Ä –Ü—Å—Ç–æ—Ä—ñ—ó

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "–ö–æ—Ä–æ—Ç–∫—ñ —ñ—Å—Ç–æ—Ä—ñ—ó" –∞–±–æ "–î–æ–≤–≥—ñ —ñ—Å—Ç–æ—Ä—ñ—ó"
2. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "üé≤ –û–±–∏—Ä–∞—é –≤–∏–ø–∞–¥–∫–æ–≤—É [–∫–æ—Ä–æ—Ç–∫—É/–¥–æ–≤–≥—É] —ñ—Å—Ç–æ—Ä—ñ—é..."
3. –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `FileProcessor.get_random_story_file()`
4. –°–∏—Å—Ç–µ–º–∞ –≤–∏—Ç—è–≥—É—î —Ç–µ–∫—Å—Ç –∑ –æ–±—Ä–∞–Ω–æ–≥–æ —Ñ–∞–π–ª—É
5. –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –Ω–∞–∑–≤–æ—é —Ñ–∞–π–ª—É —Ç–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é —Å–∏–º–≤–æ–ª—ñ–≤
6. –ü—Ä–æ—Ü–µ—Å –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è –∑ `show_ai_choice()`

### –ü—Ä–∏–∫–ª–∞–¥ –í–∏–≤–æ–¥—É

```
‚úÖ –û–±—Ä–∞–Ω–æ —Ñ–∞–π–ª: –í–µ—Å–µ–ª–∏–π –ø—Ä–∏–≥–æ–¥–∞ –≤ –ª—ñ—Å—ñ.txt
üìä –ó–Ω–∞–π–¥–µ–Ω–æ 2847 —Å–∏–º–≤–æ–ª—ñ–≤ —Ç–µ–∫—Å—Ç—É.
```

### –†—É—á–Ω–µ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

–ó–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–∏–º - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π —Ñ–∞–π–ª, —è–∫–∏–π –±—É–¥–µ –æ–±—Ä–æ–±–ª–µ–Ω–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –æ–±—Ä–æ–±–Ω–∏–∫–æ–º –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤.

## –ü–µ—Ä–µ–≤–∞–≥–∏ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

1. **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –°—É–º—ñ—Å–Ω–æ—Å—Ç—ñ** - –≤—Å—ñ —ñ—Å–Ω—É—é—á—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø—Ä–∞—Ü—é—é—Ç—å –±–µ–∑ –∑–º—ñ–Ω
2. **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –æ–±—Ä–∞—Ç–∏ –º—ñ–∂ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º —Ç–∞ —Ä—É—á–Ω–∏–º –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
3. **–†–æ–∑—à–∏—Ä—é–≤–∞–Ω—ñ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ —ñ—Å—Ç–æ—Ä—ñ—ó –¥–æ –ø–∞–ø–æ–∫
4. **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ —Ñ–∞–π–ª—ñ–≤
5. **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –§–æ—Ä–º–∞—Ç—ñ–≤** - –ø—Ä–∞—Ü—é—î –∑ `.txt` —Ç–∞ `.docx` —Ñ–∞–π–ª–∞–º–∏
6. **–ü—Ä–∏—Ä–æ–¥–Ω—ñ –ù–∞–∑–≤–∏ –§–∞–π–ª—ñ–≤** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ñ–∞–π–ª—ñ–≤ –∑ –ø—Ä–æ–±—ñ–ª–∞–º–∏, —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–º–∏ –∑–Ω–∞–∫–∞–º–∏

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ü—Ä–∏—Ä–æ–¥–Ω–∏—Ö –ù–∞–∑–≤ –§–∞–π–ª—ñ–≤

–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥—Ç—Ä–∏–º—É—î —Ñ–∞–π–ª–∏ –∑ –ø—Ä–∏—Ä–æ–¥–Ω–∏–º–∏ –Ω–∞–∑–≤–∞–º–∏:
- ‚úÖ –ü—Ä–æ–±—ñ–ª–∏: `–í–µ—Å–µ–ª–∏–π –ø—Ä–∏–≥–æ–¥–∞ –≤ –ª—ñ—Å—ñ.txt`
- ‚úÖ –£–∫—Ä–∞—ó–Ω—Å—å–∫—ñ —Å–∏–º–≤–æ–ª–∏: `–¢–∞—î–º–Ω–∏—á–∞ —Å–∫—Ä–∏–Ω—å–∫–∞.txt`
- ‚úÖ –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –∑–Ω–∞–∫–∏: `–ö–æ—Ä–æ—Ç–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—è (—Ç–µ—Å—Ç).docx`
- ‚úÖ –ó–º—ñ—à–∞–Ω—ñ —Å–∏–º–≤–æ–ª–∏: `–ú–∞–Ω–¥—Ä—ñ–≤–Ω–∏–∫–∏ –≤ —á–∞—Å—ñ.txt`

–ù–µ–º–∞—î –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—ñ–¥–∫—Ä–µ—Å–ª–µ–Ω–Ω—è `_` –∞–±–æ –¥–µ—Ñ—ñ—Å–∏ `-` –≤ –Ω–∞–∑–≤–∞—Ö —Ñ–∞–π–ª—ñ–≤.

## –ú–∞–π–±—É—Ç–Ω—ñ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è

1. –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —ñ—Å—Ç–æ—Ä—ñ–π —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å
2. –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—è —ñ—Å—Ç–æ—Ä—ñ–π –∑–∞ –∂–∞–Ω—Ä–∞–º–∏
3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —ñ—Å—Ç–æ—Ä—ñ–π
4. –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–∞ –∑:
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –ø–∞–ø–æ–∫ —Ç–∞ —Ñ–∞–π–ª—ñ–≤
- ‚úÖ –í–∏–ø–∞–¥–∫–æ–≤–∏–º –≤–∏–±–æ—Ä–æ–º —Ñ–∞–π–ª—ñ–≤
- ‚úÖ –û–±—Ä–æ–±–∫–æ—é —Ñ–∞–π–ª—ñ–≤ .txt —Ç–∞ .docx
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é –∑ —ñ—Å–Ω—É—é—á–∏–º workflow
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ —Ä—É—á–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

–í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ, —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.